<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <title>Javascript Kertaus</title>

    <style>
      body {
        font-family: 'Roboto', serif;
        font-optical-sizing: auto;
        font-weight: normal;
        font-style: normal;
        font-variation-settings: 'wdth' 100;
        background-color: white;
      }
      main {
        max-width: 700px;
        margin: auto;
        margin-bottom: 50px;
      }
      h3 {
        margin-top: 30px;
        margin-bottom: 20px;
      }
      .graybox {
        background-color: rgb(239, 239, 239);
        padding: 10px;
        max-width: 200px;
      }
    </style>
  </head>

  <body style="background-color: white";>
    <main>
      <h1>Javascript harjoittelu</h1>

      <h3>BOM</h3>

      <p>
        BOM (Browser Object Model) on selainympäristön rakenne, joka
        mahdollistaa selaimen tarjoamien toiminnallisuuksien käytön JavaScriptin
        avulla. Sen kautta voidaan käsitellä esimerkiksi selainikkunaa (window),
        URL-osoitetta (location), selaushistoriaa (history), evästeitä
        (document.cookie) ja muita selaimen resursseja. BOM ei ole osa HTML- tai
        DOM-standardeja, mutta se on keskeinen osa web-sovellusten kehittämistä.
      </p>

      <ul>
        <li>
          <a href="https://www.w3schools.com/js/js_window.asp" target="_blank"
            >Javascript Window</a
          >
        </li>
        <li>
          <a
            href="https://www.w3schools.com/js/js_ex_browser.asp"
            target="_blank"
            >JavaScript Browser Objects Examples</a
          >
        </li>
      </ul>

      <p>Avaa console ja katso miten tutkimme selainta.</p>

      <script>
        // BOM tiedon hakua
      </script>

      <h3>DOM</h3>

      <p>
        DOM (Document Object Model) on selainympäristössä käytettävä
        ohjelmointirajapinta, joka edustaa verkkosivua puumaisena rakenteena.
        Sen avulla JavaScript voi lukea ja muokata HTML-dokumenttien sisältöä,
        rakennetta ja tyylejä dynaamisesti. DOM tekee verkkosivusta
        interaktiivisen, mahdollistaen esimerkiksi elementtien lisäämisen,
        poistamisen, tyylien muuttamisen ja käyttäjän tapahtumiin reagoimisen.
      </p>

      <img
        src="https://www.w3schools.com/js/pic_htmltree.gif"
        alt="DOM"
        width="500"
      />

      <p>
        <a href="https://www.w3schools.com/jsref/default.asp" target="_blank"
          >JavaScript and HTML DOM</a
        >
      </p>

      <h3>Miten löydät, muokkaat ja lisäät elementtejä DOMissa</h3>

      <p>
        Elementtien valinta ja manipulointi tarkoittaa HTML-elementtien
        etsimistä ja muokkaamista DOM-puusta. Valinta tapahtuu esimerkiksi ID:n,
        luokan tai tunnisteen perusteella, ja manipuloinnin avulla voidaan
        muuttaa elementtien sisältöä, tyylejä tai rakenteita. Katso esimerkki
        alta:
      </p>

      <div class="graybox">
        <h4 id="otsikko">H4 Otsikko, vaihda tämä</h4>

        <ul class="fruitlist">
          <li>Omena</li>
          <li>Banaani</li>
          <li class="fruit">Appelsiini</li>
        </ul>
      </div>

      <script>
        // Vaihdetaan h4 otsikon sisältö ja värjätään tausta
        // Vaihda tekstisisältö esim. Hedelmälista

        // 1. Etsi ominaisuus
        // https://www.w3schools.com/jsref/dom_obj_document.asp

        // 2. Elementin manipulointi
        // https://www.w3schools.com/jsref/dom_obj_all.asp

        // 3. Tyylin muokkaus
        // https://www.w3schools.com/jsref/dom_obj_style.asp

        // 4. Etsi nyt Appelsiini ja tee siitä linkki joka vie sinut
        // sivulle https://fi.wikipedia.org/wiki/Appelsiini

        // 5. Lisätään nyt listaan uusi LI elementti "Mango"

        // Etsitään nyt kaikki hedelmät ja tulostetaan konsoliin
        // https://www.w3schools.com/js/js_loop_forof.asp
        // TAI
        // https://www.w3schools.com/js/js_loop_for.asp
        // TAI
        // https://www.w3schools.com/jsref/jsref_foreach.asp
      </script>

      <h3>Tapahtumankuuntelijat - lisääminen ja poistaminen</h3>

      <p>
        Tapahtumankuuntelija (event listener) on mekanismi, joka reagoi
        käyttäjän tai sovelluksen tapahtumiin, kuten klikkauksiin,
        näppäinpainalluksiin tai sivun latautumiseen. Se liitetään
        HTML-elementtiin, ja sen avulla voidaan suorittaa tietty funktio
        tapahtuman tapahtuessa.
      </p>

      <ul>
        <li>
          <a
            href="https://www.w3schools.com/js/js_htmldom_eventlistener.asp"
            target="_blank"
            >Event Listeners</a
          >
        </li>
        <li>
          <a
            href="https://www.w3schools.com/jsref/dom_obj_event.asp"
            target="_blank"
            >DOM events</a
          >
        </li>
      </ul>

      <p>1. Kerrataan ensin funktioiden rakenne, katso koodista</p>

      <p>
        <a
          href="https://www.w3schools.com/js/js_arrow_function.asp"
          target="_blank"
          >Arrow Function</a
        >
      </p>

      <script>
        // JS funktiot

        // perinteinen funktiomäärittely
        function greet(name) {
            console.log(`Moikka ${name}`);
        }

        // function expression. Funtio joka on anonyymi mutta tallennetaan muuttujaan
        const greet2 = function (name) {
            console.log(`Moikka ${name}`);
        }

        // arrow funktio / nuolifunktio, edellistä yksikertaisempi ja lyhyempi
        const greet3 = (name) => {
            console.log(`Moikka ${name}`);
        }

        greet("Alisa");
        greet2("Nelli");
        greet3("Sylvi")

      </script>

      <p>2. Lisätään nappuloille kuuntelijat</p>

      <button id="btn">Vaihda taustaväri</button>
      <button id="btn2">Avaa uusi ikkuna</button>

      <script>
        // Etsitään molemmat nappulat DOMista ja tallennetaan muuttujaan
        let btn = document.querySelector("#btn");
        let btn2 = document.querySelector("#btn2");

        // Funktio: vaihtaa taustavärin kahden vaihtoehdon välillä
        function toggleBackground(eventti) {
                console.log(eventti);
                let variNyt = document.body.style.backgroundColor;
                console.log("Taustaväri: ", variNyt);
                if (variNyt === "rgb(255,255,255)") {
                    console.log("Vaihdetaan vihreäksi");
                    document.body.style.backgroundColor = "rgb(255,182,190)"
                } else {
                    console.log("Vaihdetaan takaisin");
                    document.body.style.backgroundColor = "rgb(255,255,255)"
                }
            }
        //btn.addEventListener("click", toggleBackground);

        function toggleBackground2(event) {
            let variNyt = document.body.style.background;
            console.log(variNyt);
            document.body.style.background = 
            variNyt === "white" ? "red" : "white";
        }
        btn.addEventListener("click", toggleBackground2);

        btn2.addEventListener("click", () => {
            console.log("Klikkasin");
            window.open("https://www.w3schools.com/jsref/dom_obj_event.asp");
        });


        // Funktio: avataan uusi ikkuna
      </script>

      <p>3. Mouse Events / Tutkitaan hiiren klikkauksia</p>

      <button id="btn3">Klikkaa eri hiiren nappuloilla tutkiaksesi</button>

      <script>
        // Mitä kolmesta hiiren nappulasta painettiin? Tutkitaan mousedown eventtiä.
        let bt3 = document.querySelector("#btn3");
        bt3.addEventListener("mousedown", (event) => {
            if (event.button == 0) {
                console.log("Vasen näppäin");
            } else if (event.button == 1) {
                console.log("Keskimmäinen näppäin");
            } else if (event.button == 2) {
                console.log("Oikea näppäin");
            } else {
                console.log("Virhe");
            }
        });
      </script>

      <p>4. Key events / Näppäimistön painikkeiden eventit</p>

      <p>Paina kirjainta V niin saat värjättyä taustan violetiksi</p>

      <script>
        // Näppäimistön eventit
        window.addEventListener("keydown", (event) => {
            if (event.key == "v") {
                document.body.style.background = "violet";
            }
        });
        window.addEventListener("keyup", (event) => {
            if (event.key == "v") {
                document.body.style.background = "";
            }
        });
      </script>

      <h3>Prevent Default / Estä perus käyttäytyminen</h3>

      <a id="link" href="https://developer.mozilla.org/">MDN</a>

      <script>
        // Estetään linkin normaali toiminta
        let link = document.querySelector("#link");
        link.addEventListener("click", (event) => {
            console.log("Linkki ei toimi");
            event.preventDefault();
        });
      </script>

      <h3>Prevent Default / Estä perus käyttäytyminen FORMeissa</h3>

      <p>
        <a href="https://www.w3schools.com/html/html_forms.asp" target="_blank"
          >Forms</a
        >
      </p>

      <form action="">
        <label for="fname">Etunimi:</label>
        <input type="text" id="fname" name="fname" value="John" />
        <label for="lname">Sukunimi:</label>
        <input type="text" id="lname" name="lname" value="Doe" />
        <input type="submit" value="Submit" />
      </form>

      <script>
        // Estetään formin normaalitoiminta ja pomitaan arvot formista JSn avulla jatkokäsittelyä varten
        let form = document.querySelector("form");
        form.addEventListener("submit", (event) => {
            console.log("Form ei onnistu");
            event.preventDefault();
            const firstName = document.getElementById("fname").value;
            const lastName = document.getElementById("lname").value;
            // ~nimen lähettäminen backendille~
            console.log(`Etunimi: ${firstName} ja sukunimi: ${lastName}`);
            // vaihtoehto, palauttaa true/false:
            let choice = confirm(
                `Onko nämä tiedot oikein: ${firstName} ${lastName}`
            );
            console.log(choice);
            // Kysytään tietoja
            let name = prompt("Mikä on sinun nimesi?");
            console.log(name);

        });
      </script>
    </main>
    <script>
        // yleisiä testejä
        // ehto ? arvoJosTosi : arvoJosEpatosi
        let ika = 8;
        let tulos = "";

        tulos = ika >= 18 ? "Aikuinen" : "Lapsi";
        console.log(tulos);
    </script>
  </body>
</html>